# Configuracoes gerais da aplicacao
quarkus.application.name=smartinvest-api
quarkus.application.version=1.0.0-SNAPSHOT

# configuracoes de banco de dados - SQL Server - default
quarkus.datasource.db-kind=mssql
quarkus.datasource.username=${DB_USERNAME}
quarkus.datasource.password=${DB_PASSWORD}
quarkus.datasource.jdbc.url=${DB_JDBC_URL}
quarkus.datasource.jdbc.max-size=${DB_POOL_MAX_SIZE}
quarkus.datasource.jdbc.min-size=${DB_POOL_MIN_SIZE}
quarkus.datasource.jdbc.acquisition-timeout=${DB_ACQUISITION_TIMEOUT}
quarkus.datasource.jdbc.leak-detection-interval=${DB_LEAK_DETECTION}
# Propriedades Hibernate - Default
quarkus.hibernate-orm.database.generation=${DB_GENERATION_STRATEGY}
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.dialect=org.hibernate.dialect.SQLServerDialect
quarkus.hibernate-orm.packages=org.lucasnogueira.model.entities

quarkus.log.category."org.hibernate.type.descriptor.sql".level=WARNING


# Configuracoes de log
quarkus.log.level=${LOG_LEVEL}
quarkus.log.category."org.lucasnogueira".level=${APP_LOG_LEVEL}
quarkus.log.category."org.hibernate".level=WARN
quarkus.log.category."org.hibernate.SQL".level=WARN
quarkus.log.console.enable=${LOG_CONSOLE_ENABLED}
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
quarkus.log.category."org.lucasnogueira.service.ProdutoCacheService".level=INFO

# Configuracoes de HTTP
quarkus.http.port=${HTTP_PORT}
quarkus.http.host=${HTTP_HOST}

# JWT (autoassinado)
mp.jwt.verify.issuer=simulador
mp.jwt.verify.publickey.location=keys/publicKey.pem

smallrye.jwt.sign.key.location=keys/privateKey.pem

quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated

# Configuracoes cache
quarkus.cache.enabled=true

quarkus.cache.caffeine.produtos-tipos-cache.initial-capacity=1
quarkus.cache.caffeine.produtos-tipos-cache.maximum-size=1
quarkus.cache.caffeine.produtos-tipos-cache.expire-after-access=5M

quarkus.cache.caffeine.produtos-findall-cache.initial-capacity=1
quarkus.cache.caffeine.produtos-findall-cache.maximum-size=1
quarkus.cache.caffeine.produtos-findall-cache.expire-after-access=5M

# OpenAPI/Swagger (priorizadas do prod)
quarkus.swagger-ui.always-include=${SWAGGER_ENABLED}
quarkus.swagger-ui.path=${SWAGGER_PATH}
mp.openapi.extensions.smallrye.info.title=API Emprestimo Agora
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=API para Simulacao de Investimentos - Ambiente de producao

# Health check
quarkus.health.enabled=${HEALTH_CHECK_ENABLED}
quarkus.health.openapi.included=${HEALTH_OPENAPI_INCLUDED}

# Performance
quarkus.thread-pool.core-threads=${THREAD_POOL_CORE}
quarkus.thread-pool.max-threads=${THREAD_POOL_MAX}
quarkus.thread-pool.queue-size=${THREAD_POOL_QUEUE}
# Timeout
quarkus.http.read-timeout=${HTTP_READ_TIMEOUT}
quarkus.http.idle-timeout=${HTTP_IDLE_TIMEOUT}

# OpenTelemetry
quarkus.otel.traces.exporter=none
quarkus.otel.metrics.exporter=prometheus
quarkus.otel.service.name=emprestimo-agora
quarkus.otel.service.version=1.0.0
quarkus.smallrye-metrics.enabled=true
#quarkus.smallrye-metrics.export-prometheus.enabled=true

# Monitoramento
quarkus.micrometer.enabled=${METRICS_ENABLED}
quarkus.micrometer.export.prometheus.enabled=${PROMETHEUS_ENABLED}
quarkus.micrometer.export.prometheus.path=${PROMETHEUS_PATH}

# Rate Limiting
ratelimit.enabled=true
ratelimit.requests.per.second=200
ratelimit.requests.per.minute=12000
ratelimit.requests.per.hour=17280000
ratelimit.block.duration.minutes=1